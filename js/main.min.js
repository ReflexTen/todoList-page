"use strict";const addForm=document.querySelector(".todolist__form"),boxWrapper=document.querySelector(".todolist__box-wrapper"),boxOne=document.querySelector(".box-one"),boxTwo=document.querySelector(".box-two"),addInput=document.querySelector(".todolist__input"),sumItem=document.querySelector(".footer__num span"),toDoList=document.querySelector(".list"),delCompleted=document.querySelector("#delete-completed"),showActive=document.querySelector("#show-active"),showAll=document.querySelector("#show-all"),showCompleted=document.querySelector("#show-completed");let counter=0,numTask=0;function boxWidth(){var e=Number(getComputedStyle(boxWrapper).width.slice(0,-2));e<700?(boxOne.style.width=e-20+"px",boxTwo.style.width=e-30+"px"):(boxOne.style.width="680px",boxTwo.style.width="670px")}function quantityChange(e){"add"===e?++counter:"delete"===e&&(--counter,--numTask),sumItem.innerHTML=""+counter}function creatElement(e,t,o,l){let c=document.createElement("li");c.classList.add("list__item"),c.innerHTML=`
    <input class="list__checkbox" type="checkbox" name="item-checkbox${e}" id="item-checkbox${e}" ${l}>
    <label class="list__label ${o}" for="item-checkbox${e}">${t}</label>
      <div class="list__basket">
         <span class="sr-only">Cash</span>
      </div>
  `,toDoList.append(c),quantityChange("add")}function newToDo(e){creatElement(++numTask,e,"not-completed","");e={id:numTask,value:e,checked:!1};localStorage.setItem("task-"+numTask,JSON.stringify(e))}boxWidth(),window.addEventListener("resize",boxWidth),addForm.addEventListener("submit",e=>{e.preventDefault();var t=addInput.value;e.target.reset(),newToDo(t)});let listChange=o=>e=>{document.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active"),document.querySelectorAll(".list__label").forEach(e=>{let t=e.closest(".list__item");e.classList.contains(o)?t.classList.remove("hide"):t.classList.add("hide")})};function addTaskFromLocalStorage(){let t=0;for(let e=0;e<localStorage.length;e++){var o=Number(localStorage.key(e).slice(5));o>t&&(t=o)}for(let c=1;c<=t;c++)if(localStorage.getItem("task-"+c)){let e=localStorage.getItem("task-"+c),t=JSON.parse(e),o,l;l=1==t.checked?(o="completed","checked"):(o="not-completed",""),numTask++,creatElement(t.id,t.value,o,l)}}toDoList.addEventListener("click",o=>{let l=o.target;if(l.classList.contains("list__basket")){let e=l.closest(".list__item");e.remove(),quantityChange("delete");o=l.previousElementSibling.getAttribute("for").slice(13);localStorage.removeItem("task-"+o)}else if(l.classList.contains("list__label")){l.classList.toggle("completed"),l.classList.toggle("not-completed");o=l.getAttribute("for").slice(13);let e=localStorage.getItem("task-"+o),t=JSON.parse(e);1==t.checked?t.checked=!1:t.checked=!0,localStorage.setItem("task-"+o,JSON.stringify(t))}}),delCompleted.addEventListener("click",()=>{document.querySelectorAll(".completed").forEach(e=>{let t=e.closest(".list__item");t.remove(),quantityChange("delete");e=e.getAttribute("for").slice(13);localStorage.removeItem("task-"+e)})}),showActive.addEventListener("click",listChange("not-completed")),showCompleted.addEventListener("click",listChange("completed")),showAll.addEventListener("click",()=>{document.querySelectorAll(".list__label").forEach(e=>{let t=e.closest(".list__item");t.classList.remove("hide")}),document.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")})}),addTaskFromLocalStorage();